var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function o(t){t.forEach(n)}function c(t){return"function"==typeof t}function l(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function r(t,n){t.appendChild(n)}function s(t,n,e){t.insertBefore(n,e||null)}function i(t){t.parentNode.removeChild(t)}function u(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}function a(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function d(){return f(" ")}function h(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function m(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function p(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}function g(t,n,e,o){null===e?t.style.removeProperty(n):t.style.setProperty(n,e,o?"important":"")}function v(t,n){for(let e=0;e<t.options.length;e+=1){const o=t.options[e];if(o.__value===n)return void(o.selected=!0)}t.selectedIndex=-1}function $(t,n,e){t.classList[e?"add":"remove"](n)}let b;function w(t){b=t}function k(){if(!b)throw new Error("Function called outside component initialization");return b}const x=[],L=[],y=[],_=[],F=Promise.resolve();let E=!1;function C(t){y.push(t)}function q(t){_.push(t)}const z=new Set;let S=0;function j(){const t=b;do{for(;S<x.length;){const t=x[S];S++,w(t),I(t.$$)}for(w(null),x.length=0,S=0;L.length;)L.pop()();for(let t=0;t<y.length;t+=1){const n=y[t];z.has(n)||(z.add(n),n())}y.length=0}while(x.length);for(;_.length;)_.pop()();E=!1,z.clear(),w(t)}function I(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(C)}}const M=new Set;let A;function B(){A={r:0,c:[],p:A}}function N(){A.r||o(A.c),A=A.p}function O(t,n){t&&t.i&&(M.delete(t),t.i(n))}function G(t,n,e,o){if(t&&t.o){if(M.has(t))return;M.add(t),A.c.push((()=>{M.delete(t),o&&(e&&t.d(1),o())})),t.o(n)}}function P(t,n){const e=n.token={};function o(t,o,c,l){if(n.token!==e)return;n.resolved=l;let r=n.ctx;void 0!==c&&(r=r.slice(),r[c]=l);const s=t&&(n.current=t)(r);let i=!1;n.block&&(n.blocks?n.blocks.forEach(((t,e)=>{e!==o&&t&&(B(),G(t,1,1,(()=>{n.blocks[e]===t&&(n.blocks[e]=null)})),N())})):n.block.d(1),s.c(),O(s,1),s.m(n.mount(),n.anchor),i=!0),n.block=s,n.blocks&&(n.blocks[o]=s),i&&j()}if((c=t)&&"object"==typeof c&&"function"==typeof c.then){const e=k();if(t.then((t=>{w(e),o(n.then,1,n.value,t),w(null)}),(t=>{if(w(e),o(n.catch,2,n.error,t),w(null),!n.hasCatch)throw t})),n.current!==n.pending)return o(n.pending,0),!0}else{if(n.current!==n.then)return o(n.then,1,n.value,t),!0;n.resolved=t}var c}function J(t,n,e){const o=t.$$.props[n];void 0!==o&&(t.$$.bound[o]=e,e(t.$$.ctx[o]))}function K(t){t&&t.c()}function T(t,e,l,r){const{fragment:s,on_mount:i,on_destroy:u,after_update:a}=t.$$;s&&s.m(e,l),r||C((()=>{const e=i.map(n).filter(c);u?u.push(...e):o(e),t.$$.on_mount=[]})),a.forEach(C)}function H(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function R(t,n){-1===t.$$.dirty[0]&&(x.push(t),E||(E=!0,F.then(j)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function U(n,c,l,r,s,u,a,f=[-1]){const d=b;w(n);const h=n.$$={fragment:null,ctx:null,props:u,update:t,not_equal:s,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c.context||(d?d.$$.context:[])),callbacks:e(),dirty:f,skip_bound:!1,root:c.target||d.$$.root};a&&a(h.root);let m=!1;if(h.ctx=l?l(n,c.props||{},((t,e,...o)=>{const c=o.length?o[0]:e;return h.ctx&&s(h.ctx[t],h.ctx[t]=c)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](c),m&&R(n,t)),e})):[],h.update(),m=!0,o(h.before_update),h.fragment=!!r&&r(h.ctx),c.target){if(c.hydrate){const t=function(t){return Array.from(t.childNodes)}(c.target);h.fragment&&h.fragment.l(t),t.forEach(i)}else h.fragment&&h.fragment.c();c.intro&&O(n.$$.fragment),T(n,c.target,c.anchor,c.customElement),j()}w(d)}class V{$destroy(){H(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function D(n){let e,o;return{c(){e=a("div"),o=a("div"),m(o,"class","circle svelte-9juun5"),m(e,"class","wrapper svelte-9juun5"),g(e,"--size",n[3]+n[1]),g(e,"--color",n[0]),g(e,"--duration",n[2]),g(e,"--duration",n[2])},m(t,n){s(t,e,n),r(e,o)},p(t,[n]){10&n&&g(e,"--size",t[3]+t[1]),1&n&&g(e,"--color",t[0]),4&n&&g(e,"--duration",t[2]),4&n&&g(e,"--duration",t[2])},i:t,o:t,d(t){t&&i(e)}}}function Q(t,n,e){let{color:o="#FF3E00"}=n,{unit:c="px"}=n,{duration:l="1s"}=n,{size:r="60"}=n;return t.$$set=t=>{"color"in t&&e(0,o=t.color),"unit"in t&&e(1,c=t.unit),"duration"in t&&e(2,l=t.duration),"size"in t&&e(3,r=t.size)},[o,c,l,r]}class W extends V{constructor(t){super(),U(this,t,Q,D,l,{color:0,unit:1,duration:2,size:3})}}function X(t,n,e){const o=t.slice();return o[9]=n[e],o}function Y(t){let n,e,o=t[9]+"";return{c(){n=a("dt"),e=f(o)},m(t,o){s(t,n,o),r(n,e)},p(t,n){1&n&&o!==(o=t[9]+"")&&p(e,o)},d(t){t&&i(n)}}}function Z(n){let e,o,c,l,f,d=n[0].name,h=[];for(let t=0;t<d.length;t+=1)h[t]=Y(X(n,d,t));return{c(){e=a("div"),o=a("div"),c=a("div"),l=a("dl");for(let t=0;t<h.length;t+=1)h[t].c();m(l,"class","svelte-1waikzj"),m(c,"class","card svelte-1waikzj"),m(o,"class","card-div svelte-1waikzj"),m(o,"data-result-cost",f=n[0].resultCost),m(e,"class","card-wrap svelte-1waikzj"),$(e,"rowFirst",n[1]),$(e,"rowLast",n[2]),$(e,"columnFirst",n[3]),$(e,"columnLast",n[4]),$(e,"columnEven",n[6]),$(e,"rowEven",n[5])},m(t,n){s(t,e,n),r(e,o),r(o,c),r(c,l);for(let t=0;t<h.length;t+=1)h[t].m(l,null)},p(t,[n]){if(1&n){let e;for(d=t[0].name,e=0;e<d.length;e+=1){const o=X(t,d,e);h[e]?h[e].p(o,n):(h[e]=Y(o),h[e].c(),h[e].m(l,null))}for(;e<h.length;e+=1)h[e].d(1);h.length=d.length}1&n&&f!==(f=t[0].resultCost)&&m(o,"data-result-cost",f),2&n&&$(e,"rowFirst",t[1]),4&n&&$(e,"rowLast",t[2]),8&n&&$(e,"columnFirst",t[3]),16&n&&$(e,"columnLast",t[4])},i:t,o:t,d(t){t&&i(e),u(h,t)}}}function tt(t,n,e){let{card:o}=n,{rowFirst:c}=n,{rowLast:l}=n,{columnFirst:r}=n,{columnLast:s}=n,{rowIdx:i}=n,{columnIdx:u}=n,a=i%2==0,f=u%2==0;return t.$$set=t=>{"card"in t&&e(0,o=t.card),"rowFirst"in t&&e(1,c=t.rowFirst),"rowLast"in t&&e(2,l=t.rowLast),"columnFirst"in t&&e(3,r=t.columnFirst),"columnLast"in t&&e(4,s=t.columnLast),"rowIdx"in t&&e(7,i=t.rowIdx),"columnIdx"in t&&e(8,u=t.columnIdx)},[o,c,l,r,s,a,f,i,u]}class nt extends V{constructor(t){super(),U(this,t,tt,Z,l,{card:0,rowFirst:1,rowLast:2,columnFirst:3,columnLast:4,rowIdx:7,columnIdx:8})}}function et(t,n,e){const o=t.slice();return o[5]=n[e],o[7]=e,o}function ot(t,n,e){const o=t.slice();return o[8]=n[e],o[10]=e,o}function ct(t){let n,e;return n=new nt({props:{card:t[8],rowFirst:0===t[7],rowLast:t[7]===t[1].length-1,columnFirst:0===t[10],columnLast:t[10]===t[5].length-1,rowIdx:t[7],columnIdx:t[10]}}),{c(){K(n.$$.fragment)},m(t,o){T(n,t,o),e=!0},p(t,e){const o={};2&e&&(o.card=t[8]),2&e&&(o.rowLast=t[7]===t[1].length-1),2&e&&(o.columnLast=t[10]===t[5].length-1),n.$set(o)},i(t){e||(O(n.$$.fragment,t),e=!0)},o(t){G(n.$$.fragment,t),e=!1},d(t){H(n,t)}}}function lt(t){let n,e,o,c,l,h,p,g,v=t[7]+1+"",$=t[5],b=[];for(let n=0;n<$.length;n+=1)b[n]=ct(ot(t,$,n));const w=t=>G(b[t],1,1,(()=>{b[t]=null}));return{c(){n=a("div"),e=a("div"),o=f(v),c=f("回目"),l=d(),h=a("div");for(let t=0;t<b.length;t+=1)b[t].c();p=d(),m(h,"class","flex svelte-u3t7gc"),m(n,"class","notification svelte-u3t7gc")},m(t,i){s(t,n,i),r(n,e),r(e,o),r(e,c),r(n,l),r(n,h);for(let t=0;t<b.length;t+=1)b[t].m(h,null);r(n,p),g=!0},p(t,n){if(2&n){let e;for($=t[5],e=0;e<$.length;e+=1){const o=ot(t,$,e);b[e]?(b[e].p(o,n),O(b[e],1)):(b[e]=ct(o),b[e].c(),O(b[e],1),b[e].m(h,null))}for(B(),e=$.length;e<b.length;e+=1)w(e);N()}},i(t){if(!g){for(let t=0;t<$.length;t+=1)O(b[t]);g=!0}},o(t){b=b.filter(Boolean);for(let t=0;t<b.length;t+=1)G(b[t]);g=!1},d(t){t&&i(n),u(b,t)}}}function rt(t){let n,e,o,c,l,h,g=t[1],v=[];for(let n=0;n<g.length;n+=1)v[n]=lt(et(t,g,n));const $=t=>G(v[t],1,1,(()=>{v[t]=null}));return{c(){n=a("div"),e=a("div"),o=f("総コスト："),c=f(t[0]),l=d();for(let t=0;t<v.length;t+=1)v[t].c();m(e,"class","notification is-primary cost-display svelte-u3t7gc"),m(n,"class","block result svelte-u3t7gc")},m(t,i){s(t,n,i),r(n,e),r(e,o),r(e,c),r(n,l);for(let t=0;t<v.length;t+=1)v[t].m(n,null);h=!0},p(t,[e]){if((!h||1&e)&&p(c,t[0]),2&e){let o;for(g=t[1],o=0;o<g.length;o+=1){const c=et(t,g,o);v[o]?(v[o].p(c,e),O(v[o],1)):(v[o]=lt(c),v[o].c(),O(v[o],1),v[o].m(n,null))}for(B(),o=g.length;o<v.length;o+=1)$(o);N()}},i(t){if(!h){for(let t=0;t<g.length;t+=1)O(v[t]);h=!0}},o(t){v=v.filter(Boolean);for(let t=0;t<v.length;t+=1)G(v[t]);h=!1},d(t){t&&i(n),u(v,t)}}}function st(t,n){var e,o,c,l,r,s;if(e=[],!((l=t.length)<n)){if(1==n)for(o=0;o<l;o++)e[o]=[t[o]];else for(o=0;o<l;o++)for((s=t.slice(0)).splice(o,1)[0],r=st(s,n-1),c=0;c<r.length;c++)e.push([t[o]].concat(r[c]));return e}}function it(t,n,e){let o,c,{items:l}=n;function r(t){if(!t.length)return[[],0];let n,e=1e3;return st(t,t.length).forEach((t=>{let o=t.map(((t,n)=>(t.columnStart=n+2,t.columnEnd=n+3,t))),[c,l,r]=function(t){let n,e,o,c=[],l=[[...t.map((t=>({...t})))]],r=[0,1,3],s=0,i=0,u=0,a=0,f=!0;const d=40;for(n=Math.ceil(Math.log(l[0].length)/Math.log(2))+1,s=1;s<n;s++){if(l.push([]),c=[...l[s-1]],c.length>1)for(a=0;a<c.length-1;a+=2)e=c[a].cost+c[a+1].cost,o=c[a+1].cost,i=o+r[c[a].createCount]+r[c[a+1].createCount],l[s].push({id:[...c[a].id,c[a+1].id],name:[...c[a].name,...c[a+1].name],cost:e,createCount:Math.max(c[a].createCount,c[a+1].createCount)+1,createCost:i,mergeGrid:c[a].mergeGrid+c[a+1].mergeGrid,columnStart:c[a].columnStart,columnEnd:c[a+1].columnEnd}),c[a+1].resultCost=i,u+=i,f=!!f&&i<d;a===c.length-1&&l[s].push(Object.assign({},c[a]))}return[l,u,f]}(o);l<e&&r&&(e=l,n=c)})),n.pop(),[n,e]}return t.$$set=t=>{"items"in t&&e(2,l=t.items)},t.$$.update=()=>{4&t.$$.dirty&&e(1,[o,c]=r(l),o,(e(0,c),e(2,l)))},[c,o,l]}class ut extends V{constructor(t){super(),U(this,t,it,rt,l,{items:2})}}function at(t,n,e){const o=t.slice();return o[9]=n[e],o[10]=n,o[11]=e,o}function ft(t,n,e){const o=t.slice();return o[12]=n[e],o}function dt(t){let n,e,o,c=t[12].name+"";return{c(){n=a("option"),e=f(c),n.__value=o=t[12].id,n.value=n.__value},m(t,o){s(t,n,o),r(n,e)},p(t,l){2&l&&c!==(c=t[12].name+"")&&p(e,c),2&l&&o!==(o=t[12].id)&&(n.__value=o,n.value=n.__value)},d(t){t&&i(n)}}}function ht(n){let e;return{c(){e=a("div"),m(e,"class","delete plus svelte-1dvouqq"),g(e,"visibility","hidden")},m(t,n){s(t,e,n)},p:t,d(t){t&&i(e)}}}function mt(t){let n,e,o;function c(){return t[7](t[11])}return{c(){n=a("div"),m(n,"class","delete plus svelte-1dvouqq")},m(t,l){s(t,n,l),e||(o=h(n,"click",c),e=!0)},p(n,e){t=n},d(t){t&&i(n),e=!1,o()}}}function pt(t){let n,e,o;function c(){return t[8](t[11])}return{c(){n=a("div"),m(n,"class","delete minus svelte-1dvouqq")},m(t,l){s(t,n,l),e||(o=h(n,"click",c),e=!0)},p(n,e){t=n},d(t){t&&i(n),e=!1,o()}}}function gt(t){let n,e,c,l,p,g,$,b,w,k,x,L,y=t[11]+1+"",_=t[1],F=[];for(let n=0;n<_.length;n+=1)F[n]=dt(ft(t,_,n));function E(){t[5].call($,t[10],t[11])}function q(...n){return t[6](t[11],...n)}let z=function(t,n){return t[11]<7?mt:ht}(t),S=z(t),j=(t[11]>0||t[0].length>1)&&pt(t);return{c(){n=a("div"),e=a("div"),c=f("ItemNo."),l=f(y),p=d(),g=a("div"),$=a("select");for(let t=0;t<F.length;t+=1)F[t].c();b=d(),S.c(),w=d(),j&&j.c(),k=d(),m(e,"class","item-no"),m($,"name","enchant-list"),m($,"class","svelte-1dvouqq"),void 0===t[9]&&C(E),m(g,"class","select svelte-1dvouqq"),m(n,"class","field svelte-1dvouqq")},m(o,i){s(o,n,i),r(n,e),r(e,c),r(e,l),r(n,p),r(n,g),r(g,$);for(let t=0;t<F.length;t+=1)F[t].m($,null);v($,t[9]),r(n,b),S.m(n,null),r(n,w),j&&j.m(n,null),r(n,k),x||(L=[h($,"change",E),h($,"change",q)],x=!0)},p(e,o){if(t=e,2&o){let n;for(_=t[1],n=0;n<_.length;n+=1){const e=ft(t,_,n);F[n]?F[n].p(e,o):(F[n]=dt(e),F[n].c(),F[n].m($,null))}for(;n<F.length;n+=1)F[n].d(1);F.length=_.length}3&o&&v($,t[9]),S.p(t,o),t[11]>0||t[0].length>1?j?j.p(t,o):(j=pt(t),j.c(),j.m(n,k)):j&&(j.d(1),j=null)},d(t){t&&i(n),u(F,t),S.d(),j&&j.d(),x=!1,o(L)}}}function vt(n){let e,o=n[0],c=[];for(let t=0;t<o.length;t+=1)c[t]=gt(at(n,o,t));return{c(){e=a("div");for(let t=0;t<c.length;t+=1)c[t].c();m(e,"class","block pt-4")},m(t,n){s(t,e,n);for(let t=0;t<c.length;t+=1)c[t].m(e,null)},p(t,[n]){if(31&n){let l;for(o=t[0],l=0;l<o.length;l+=1){const r=at(t,o,l);c[l]?c[l].p(r,n):(c[l]=gt(r),c[l].c(),c[l].m(e,null))}for(;l<c.length;l+=1)c[l].d(1);c.length=o.length}},i:t,o:t,d(t){t&&i(e),u(c,t)}}}function $t(t,n,e){let{enchantSelectList:o}=n,{enchantList:c}=n;function l(t){o.length<8&&(o.splice(t+1,0,0),e(0,o))}function r(t){o.length>1&&(o.splice(t,1),e(0,o))}function s(t,n){0==t.target.value&&o.length>1?r(n):t.target.value>0&&o.length<8&&n+1==o.length&&(o.push(0),e(0,o))}return t.$$set=t=>{"enchantSelectList"in t&&e(0,o=t.enchantSelectList),"enchantList"in t&&e(1,c=t.enchantList)},[o,c,l,r,s,function(t,n){t[n]=function(t){const n=t.querySelector(":checked")||t.options[0];return n&&n.__value}(this),e(0,o),e(1,c)},(t,n)=>s(n,t),t=>l(t),t=>r(t)]}class bt extends V{constructor(t){super(),U(this,t,$t,vt,l,{enchantSelectList:0,enchantList:1})}}function wt(n){return{c:t,m:t,p:t,i:t,o:t,d:t}}function kt(t){let n,e,c,l,u,p,g,v,$,b,w,k,x,y,_,F;function E(n){t[7](n)}let C={};function z(n){t[10](n)}function S(n){t[11](n)}void 0!==t[1]&&(C.items=t[1]),e=new ut({props:C}),L.push((()=>J(e,"items",E)));let j={};return void 0!==t[0]&&(j.enchantSelectList=t[0]),void 0!==t[2]&&(j.enchantList=t[2]),w=new bt({props:j}),L.push((()=>J(w,"enchantSelectList",z))),L.push((()=>J(w,"enchantList",S))),{c(){n=a("main"),K(e.$$.fragment),l=d(),u=a("div"),p=a("button"),g=f("コスト計算"),v=d(),$=a("button"),$.textContent="クリア",b=d(),K(w.$$.fragment),m(p,"class","button is-primary"),p.disabled=t[3],m($,"class","button is-light"),m(u,"class","block p-4"),m(n,"class","svelte-7szgb5")},m(o,c){s(o,n,c),T(e,n,null),r(n,l),r(n,u),r(u,p),r(p,g),r(u,v),r(u,$),r(u,b),T(w,u,null),y=!0,_||(F=[h(p,"click",t[8]),h($,"click",t[9])],_=!0)},p(t,n){const o={};!c&&2&n&&(c=!0,o.items=t[1],q((()=>c=!1))),e.$set(o),(!y||8&n)&&(p.disabled=t[3]);const l={};!k&&1&n&&(k=!0,l.enchantSelectList=t[0],q((()=>k=!1))),!x&&4&n&&(x=!0,l.enchantList=t[2],q((()=>x=!1))),w.$set(l)},i(t){y||(O(e.$$.fragment,t),O(w.$$.fragment,t),y=!0)},o(t){G(e.$$.fragment,t),G(w.$$.fragment,t),y=!1},d(t){t&&i(n),H(e),H(w),_=!1,o(F)}}}function xt(n){let e,o,c;return o=new W({props:{color:"#00db37",size:"120"}}),{c(){e=a("div"),K(o.$$.fragment),m(e,"class","center svelte-7szgb5")},m(t,n){s(t,e,n),T(o,e,null),c=!0},p:t,i(t){c||(O(o.$$.fragment,t),c=!0)},o(t){G(o.$$.fragment,t),c=!1},d(t){t&&i(e),H(o)}}}function Lt(t){let n,e,o={ctx:t,current:null,token:null,hasCatch:!1,pending:xt,then:kt,catch:wt,value:12,blocks:[,,,]};return P(t[5](),o),{c(){n=f(""),o.block.c()},m(t,c){s(t,n,c),o.block.m(t,o.anchor=c),o.mount=()=>n.parentNode,o.anchor=n,e=!0},p(n,[e]){!function(t,n,e){const o=n.slice(),{resolved:c}=t;t.current===t.then&&(o[t.value]=c),t.current===t.catch&&(o[t.error]=c),t.block.p(o,e)}(o,t=n,e)},i(t){e||(O(o.block),e=!0)},o(t){for(let t=0;t<3;t+=1){G(o.blocks[t])}e=!1},d(t){t&&i(n),o.block.d(t),o.token=null,o=null}}}function yt(t,n,e){let o,c,l=[0],r=[];function s(){e(1,r=l.map((t=>({id:[o[t].id],name:[o[t].name],cost:o[t].cost,createCount:0,createCost:0,mergeGrid:1,columnStart:0,columnEnd:0}))).filter((t=>0!==t.id[0])))}function i(){e(0,l=[0]),e(1,r=[])}return e(3,c=!1),[l,r,o,false,s,async function(){const t=await fetch("https://script.google.com/macros/s/AKfycbxJF8EuqLvNvFne0mKI6M5jpmRu7MUcomBni5JVppir_Fa4rGBO53pBthOuCH0s94h0cA/exec");200!==t.status?alert("エンチャントリストの取得に失敗しました。"):(e(2,o=await t.json()),e(2,o=[{id:0,name:"",cost:0},...o]))},i,function(t){r=t,e(1,r)},()=>s(),()=>i(),function(t){l=t,e(0,l)},function(t){o=t,e(2,o)}]}return new class extends V{constructor(t){super(),U(this,t,yt,Lt,l,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
