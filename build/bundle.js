var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function o(t){t.forEach(n)}function r(t){return"function"==typeof t}function c(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function l(t,n){t.appendChild(n)}function s(t,n,e){t.insertBefore(n,e||null)}function u(t){t.parentNode.removeChild(t)}function i(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}function a(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function d(){return f(" ")}function m(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function h(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}function g(t,n){for(let e=0;e<t.options.length;e+=1){const o=t.options[e];if(o.__value===n)return void(o.selected=!0)}t.selectedIndex=-1}function p(t,n,e){t.classList[e?"add":"remove"](n)}let $;function v(t){$=t}const w=[],x=[],y=[],_=[],b=Promise.resolve();let C=!1;function L(t){y.push(t)}function k(t){_.push(t)}const E=new Set;let F=0;function I(){const t=$;do{for(;F<w.length;){const t=w[F];F++,v(t),j(t.$$)}for(v(null),w.length=0,F=0;x.length;)x.pop()();for(let t=0;t<y.length;t+=1){const n=y[t];E.has(n)||(E.add(n),n())}y.length=0}while(w.length);for(;_.length;)_.pop()();C=!1,E.clear(),v(t)}function j(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(L)}}const A=new Set;let S;function M(){S={r:0,c:[],p:S}}function z(){S.r||o(S.c),S=S.p}function G(t,n){t&&t.i&&(A.delete(t),t.i(n))}function O(t,n,e,o){if(t&&t.o){if(A.has(t))return;A.add(t),S.c.push((()=>{A.delete(t),o&&(e&&t.d(1),o())})),t.o(n)}}function B(t,n,e){const o=t.$$.props[n];void 0!==o&&(t.$$.bound[o]=e,e(t.$$.ctx[o]))}function N(t){t&&t.c()}function q(t,e,c,l){const{fragment:s,on_mount:u,on_destroy:i,after_update:a}=t.$$;s&&s.m(e,c),l||L((()=>{const e=u.map(n).filter(r);i?i.push(...e):o(e),t.$$.on_mount=[]})),a.forEach(L)}function T(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function P(t,n){-1===t.$$.dirty[0]&&(w.push(t),C||(C=!0,b.then(I)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function V(n,r,c,l,s,i,a,f=[-1]){const d=$;v(n);const m=n.$$={fragment:null,ctx:null,props:i,update:t,not_equal:s,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(d?d.$$.context:[])),callbacks:e(),dirty:f,skip_bound:!1,root:r.target||d.$$.root};a&&a(m.root);let h=!1;if(m.ctx=c?c(n,r.props||{},((t,e,...o)=>{const r=o.length?o[0]:e;return m.ctx&&s(m.ctx[t],m.ctx[t]=r)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](r),h&&P(n,t)),e})):[],m.update(),h=!0,o(m.before_update),m.fragment=!!l&&l(m.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);m.fragment&&m.fragment.l(t),t.forEach(u)}else m.fragment&&m.fragment.c();r.intro&&G(n.$$.fragment),q(n,r.target,r.anchor,r.customElement),I()}v(d)}class D{$destroy(){T(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function H(t,n,e){const o=t.slice();return o[9]=n[e],o}function J(t){let n,e,o=t[9]+"";return{c(){n=a("dt"),e=f(o)},m(t,o){s(t,n,o),l(n,e)},p(t,n){1&n&&o!==(o=t[9]+"")&&h(e,o)},d(t){t&&u(n)}}}function K(n){let e,o,r,c,f,d=n[0].name,h=[];for(let t=0;t<d.length;t+=1)h[t]=J(H(n,d,t));return{c(){e=a("div"),o=a("div"),r=a("div"),c=a("dl");for(let t=0;t<h.length;t+=1)h[t].c();m(c,"class","svelte-1waikzj"),m(r,"class","card svelte-1waikzj"),m(o,"class","card-div svelte-1waikzj"),m(o,"data-result-cost",f=n[0].resultCost),m(e,"class","card-wrap svelte-1waikzj"),p(e,"rowFirst",n[1]),p(e,"rowLast",n[2]),p(e,"columnFirst",n[3]),p(e,"columnLast",n[4]),p(e,"columnEven",n[6]),p(e,"rowEven",n[5])},m(t,n){s(t,e,n),l(e,o),l(o,r),l(r,c);for(let t=0;t<h.length;t+=1)h[t].m(c,null)},p(t,[n]){if(1&n){let e;for(d=t[0].name,e=0;e<d.length;e+=1){const o=H(t,d,e);h[e]?h[e].p(o,n):(h[e]=J(o),h[e].c(),h[e].m(c,null))}for(;e<h.length;e+=1)h[e].d(1);h.length=d.length}1&n&&f!==(f=t[0].resultCost)&&m(o,"data-result-cost",f),2&n&&p(e,"rowFirst",t[1]),4&n&&p(e,"rowLast",t[2]),8&n&&p(e,"columnFirst",t[3]),16&n&&p(e,"columnLast",t[4])},i:t,o:t,d(t){t&&u(e),i(h,t)}}}function Q(t,n,e){let{card:o}=n,{rowFirst:r}=n,{rowLast:c}=n,{columnFirst:l}=n,{columnLast:s}=n,{rowIdx:u}=n,{columnIdx:i}=n,a=u%2==0,f=i%2==0;return t.$$set=t=>{"card"in t&&e(0,o=t.card),"rowFirst"in t&&e(1,r=t.rowFirst),"rowLast"in t&&e(2,c=t.rowLast),"columnFirst"in t&&e(3,l=t.columnFirst),"columnLast"in t&&e(4,s=t.columnLast),"rowIdx"in t&&e(7,u=t.rowIdx),"columnIdx"in t&&e(8,i=t.columnIdx)},[o,r,c,l,s,a,f,u,i]}class R extends D{constructor(t){super(),V(this,t,Q,K,c,{card:0,rowFirst:1,rowLast:2,columnFirst:3,columnLast:4,rowIdx:7,columnIdx:8})}}function U(t,n,e){const o=t.slice();return o[5]=n[e],o[7]=e,o}function W(t,n,e){const o=t.slice();return o[8]=n[e],o[10]=e,o}function X(t){let n,e;return n=new R({props:{card:t[8],rowFirst:0===t[7],rowLast:t[7]===t[1].length-1,columnFirst:0===t[10],columnLast:t[10]===t[5].length-1,rowIdx:t[7],columnIdx:t[10]}}),{c(){N(n.$$.fragment)},m(t,o){q(n,t,o),e=!0},p(t,e){const o={};2&e&&(o.card=t[8]),2&e&&(o.rowLast=t[7]===t[1].length-1),2&e&&(o.columnLast=t[10]===t[5].length-1),n.$set(o)},i(t){e||(G(n.$$.fragment,t),e=!0)},o(t){O(n.$$.fragment,t),e=!1},d(t){T(n,t)}}}function Y(t){let n,e,o,r,c,h,g,p,$=t[7]+1+"",v=t[5],w=[];for(let n=0;n<v.length;n+=1)w[n]=X(W(t,v,n));const x=t=>O(w[t],1,1,(()=>{w[t]=null}));return{c(){n=a("div"),e=a("div"),o=f($),r=f("回目"),c=d(),h=a("div");for(let t=0;t<w.length;t+=1)w[t].c();g=d(),m(h,"class","flex svelte-u3t7gc"),m(n,"class","notification svelte-u3t7gc")},m(t,u){s(t,n,u),l(n,e),l(e,o),l(e,r),l(n,c),l(n,h);for(let t=0;t<w.length;t+=1)w[t].m(h,null);l(n,g),p=!0},p(t,n){if(2&n){let e;for(v=t[5],e=0;e<v.length;e+=1){const o=W(t,v,e);w[e]?(w[e].p(o,n),G(w[e],1)):(w[e]=X(o),w[e].c(),G(w[e],1),w[e].m(h,null))}for(M(),e=v.length;e<w.length;e+=1)x(e);z()}},i(t){if(!p){for(let t=0;t<v.length;t+=1)G(w[t]);p=!0}},o(t){w=w.filter(Boolean);for(let t=0;t<w.length;t+=1)O(w[t]);p=!1},d(t){t&&u(n),i(w,t)}}}function Z(t){let n,e,o,r,c,g,p=t[1],$=[];for(let n=0;n<p.length;n+=1)$[n]=Y(U(t,p,n));const v=t=>O($[t],1,1,(()=>{$[t]=null}));return{c(){n=a("div"),e=a("div"),o=f("総コスト："),r=f(t[0]),c=d();for(let t=0;t<$.length;t+=1)$[t].c();m(e,"class","notification is-success cost-display svelte-u3t7gc"),m(n,"class","block result svelte-u3t7gc")},m(t,u){s(t,n,u),l(n,e),l(e,o),l(e,r),l(n,c);for(let t=0;t<$.length;t+=1)$[t].m(n,null);g=!0},p(t,[e]){if((!g||1&e)&&h(r,t[0]),2&e){let o;for(p=t[1],o=0;o<p.length;o+=1){const r=U(t,p,o);$[o]?($[o].p(r,e),G($[o],1)):($[o]=Y(r),$[o].c(),G($[o],1),$[o].m(n,null))}for(M(),o=p.length;o<$.length;o+=1)v(o);z()}},i(t){if(!g){for(let t=0;t<p.length;t+=1)G($[t]);g=!0}},o(t){$=$.filter(Boolean);for(let t=0;t<$.length;t+=1)O($[t]);g=!1},d(t){t&&u(n),i($,t)}}}function tt(t,n){var e,o,r,c,l,s;if(e=[],!((c=t.length)<n)){if(1==n)for(o=0;o<c;o++)e[o]=[t[o]];else for(o=0;o<c;o++)for((s=t.slice(0)).splice(o,1)[0],l=tt(s,n-1),r=0;r<l.length;r++)e.push([t[o]].concat(l[r]));return e}}function nt(t,n,e){let o,r,{items:c}=n;function l(t){let n,e=1e3;return tt(t,t.length).forEach((t=>{let o=t.map(((t,n)=>(t.columnStart=n+2,t.columnEnd=n+3,t))),[r,c,l]=function(t){let n,e,o,r=[],c=[[...t.map((t=>({...t})))]],l=[0,1,3],s=0,u=0,i=0,a=0,f=!0;const d=40;for(n=Math.ceil(Math.log(c[0].length)/Math.log(2))+1,s=1;s<n;s++){if(c.push([]),r=[...c[s-1]],r.length>1)for(a=0;a<r.length-1;a+=2)e=r[a].cost+r[a+1].cost,o=r[a+1].cost,u=o+l[r[a].createCount]+l[r[a+1].createCount],c[s].push({id:[...r[a].id,r[a+1].id],name:[...r[a].name,...r[a+1].name],cost:e,createCount:Math.max(r[a].createCount,r[a+1].createCount)+1,createCost:u,mergeGrid:r[a].mergeGrid+r[a+1].mergeGrid,columnStart:r[a].columnStart,columnEnd:r[a+1].columnEnd}),r[a+1].resultCost=u,i+=u,f=!!f&&u<d;a===r.length-1&&c[s].push(Object.assign({},r[a]))}return[c,i,f]}(o);c<e&&l&&(e=c,n=r)})),n.pop(),[n,e]}return t.$$set=t=>{"items"in t&&e(2,c=t.items)},t.$$.update=()=>{4&t.$$.dirty&&e(1,[o,r]=l(c),o,(e(0,r),e(2,c)))},[r,o,c]}class et extends D{constructor(t){super(),V(this,t,nt,Z,c,{items:2})}}function ot(t,n,e){const o=t.slice();return o[2]=n[e],o}function rt(n){let e,o,r,c=n[2]+1+"";return{c(){e=a("option"),o=f(c),e.__value=r=n[2]+1,e.value=e.__value},m(t,n){s(t,e,n),l(e,o)},p:t,d(t){t&&u(e)}}}function ct(n){let e,o,r,c,f,h,p,$,v=[...Array(8).keys()],w=[];for(let t=0;t<v.length;t+=1)w[t]=rt(ot(n,v,t));return{c(){e=a("div"),o=a("div"),r=a("label"),r.textContent="アイテム数",c=d(),f=a("div"),h=a("select");for(let t=0;t<w.length;t+=1)w[t].c();m(r,"class","label"),m(r,"for","item-count"),m(h,"name","item-count"),m(h,"id","item-count"),m(h,"class","svelte-1v8674a"),void 0===n[0]&&L((()=>n[1].call(h))),m(f,"class","select svelte-1v8674a"),m(o,"class","field"),m(e,"class","container")},m(t,u){s(t,e,u),l(e,o),l(o,r),l(o,c),l(o,f),l(f,h);for(let t=0;t<w.length;t+=1)w[t].m(h,null);var i,a,d,m;g(h,n[0]),p||(i=h,a="change",d=n[1],i.addEventListener(a,d,m),$=()=>i.removeEventListener(a,d,m),p=!0)},p(t,[n]){if(0&n){let e;for(v=[...Array(8).keys()],e=0;e<v.length;e+=1){const o=ot(t,v,e);w[e]?w[e].p(o,n):(w[e]=rt(o),w[e].c(),w[e].m(h,null))}for(;e<w.length;e+=1)w[e].d(1);w.length=v.length}1&n&&g(h,t[0])},i:t,o:t,d(t){t&&u(e),i(w,t),p=!1,$()}}}function lt(t,n,e){let{itemCount:o}=n;return t.$$set=t=>{"itemCount"in t&&e(0,o=t.itemCount)},[o,function(){o=function(t){const n=t.querySelector(":checked")||t.options[0];return n&&n.__value}(this),e(0,o)}]}class st extends D{constructor(t){super(),V(this,t,lt,ct,c,{itemCount:0})}}function ut(t){let n,e,o,r,c,i,f;function h(n){t[2](n)}let g={};function p(n){t[3](n)}void 0!==t[1]&&(g.items=t[1]),e=new et({props:g}),x.push((()=>B(e,"items",h)));let $={};return void 0!==t[0]&&($.itemCount=t[0]),c=new st({props:$}),x.push((()=>B(c,"itemCount",p))),{c(){n=a("main"),N(e.$$.fragment),r=d(),N(c.$$.fragment),m(n,"class","svelte-h9gl72")},m(t,o){s(t,n,o),q(e,n,null),l(n,r),q(c,n,null),f=!0},p(t,[n]){const r={};!o&&2&n&&(o=!0,r.items=t[1],k((()=>o=!1))),e.$set(r);const l={};!i&&1&n&&(i=!0,l.itemCount=t[0],k((()=>i=!1))),c.$set(l)},i(t){f||(G(e.$$.fragment,t),G(c.$$.fragment,t),f=!0)},o(t){O(e.$$.fragment,t),O(c.$$.fragment,t),f=!1},d(t){t&&u(n),T(e),T(c)}}}function it(t,n,e){let o,r=5;return t.$$.update=()=>{1&t.$$.dirty&&e(1,o=[...Array(r).keys()].map((t=>{let n=t+1;return{id:[t],name:["射撃ダメージ増加V"+n],cost:n,createCount:0,createCost:0,mergeGrid:1,columnStart:0,columnEnd:0}})))},[r,o,function(t){o=t,e(1,o),e(0,r)},function(t){r=t,e(0,r)}]}return new class extends D{constructor(t){super(),V(this,t,it,ut,c,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
